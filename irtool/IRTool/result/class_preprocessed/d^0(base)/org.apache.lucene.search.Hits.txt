import java import java util concurr modif import java util iter import java util vector import org apach lucen document document import org apach lucen index corrupt index org apach lucen search hit privat weight weight privat searcher searcher privat filter filter null privat sort sort null privat int length privat vector hit doc vector privat hit doc privat hit doc privat int num doc privat int max doc privat int delet privat int length start privat int delet hit boolean debug check delet fals hit searcher queri filter weight weight searcher filter delet count delet retriev initi doc length start length hit searcher queri filter sort weight weight searcher filter sort delet count delet retriev initi doc length start length count delet searcher int cnt instanceof index searcher return cnt doc int hit doc size min int min top doc top doc sort null searcher search weight filter searcher search weight filter sort length top doc total hit score doc score doc top doc score doc float score norm length top doc max score int start hit doc size delet hit int del count delet searcher debug check delet fals delet del delet int score doc length length score doc length length length delet hit int start delet del length return length doc int hit doc hit doc hit doc updat cach document remov list remov hit doc add front list add front hit doc num doc max doc hit doc doc null return hit doc doc score int return hit doc score int return hit doc iter return hit iter hit doc int length start hit doc size length return hit doc hit doc element add front hit doc null els hit doc hit doc hit doc prev null num doc remov hit doc hit doc doc null hit doc null els hit doc prev null els num doc 